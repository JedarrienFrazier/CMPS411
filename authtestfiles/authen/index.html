<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Example</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/MUSA_panel-table.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="assets/css/MUSA_panel-table1.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://use.fontawesome.com/8c2a971715.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css" />
</head>
</head>

<body>
  <form>
    <div>
      <input id="email" type="text" placeholder="Email...">
    </div>
    <div>
      <input id="password" type="password" placeholder="Password...">
    </div>
    <div>
      <button id="register" class="btn-action">Register</button>
      <button id="sign-in">Sign In</button>
      <button id="sign-out" class="btn-action">Sign Out</button >
    </div>
  </form>

  <!--Include firebase.js  -->
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  
  <!--Configure firebase-->
  <script>
    // Visit https://console.firebase.google.com/project/<your project id>/overview and click on "Add Firebase to your web app"
	var config = {
		apiKey: "AIzaSyAXMQmf7-hIz6ync_qjScwEkFmbgLLiIYo",
		authDomain: "the-real-man-world.firebaseapp.com",
		databaseURL: "https://the-real-man-world.firebaseio.com",
		projectId: "the-real-man-world",
		storageBucket: "the-real-man-world.appspot.com",
		messagingSenderId: "179134749320"
	};
    firebase.initializeApp(config);
  </script>

  <!--Handle auth events-->
  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      window.user = user;
      // Step 1:
      //  If no user, sign in anonymously with firebase.auth().signInAnonymously()
      //  If there is a user, log out out user details for debugging purposes.
    });
  </script>
  
  <!--Handle page events-->
  <script>    
    document.querySelector('#register').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      var email = document.querySelector('#email').value;
      var password = document.querySelector('#password').value
      var credential = firebase.auth.EmailAuthProvider.credential(email, password);
      var auth = firebase.auth();
      var currentUser = auth.currentUser;
      
	firebase.auth().createUserWithEmailAndPassword(email, password)

	
		.catch(function(error) {
	  // Handle Errors here.
	  var errorCode = error.code;
	  var errorMessage = error.message;
	  if (errorCode == 'auth/weak-password') {
		alert('The password is too weak.');
	  } else {
		alert(errorMessage);
	  }
	  console.log(error);
	});
    });
	
// Sign in

    document.querySelector('#register').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      var email = document.querySelector('#email').value;
      var password = document.querySelector('#password').value
      var credential = firebase.auth.EmailAuthProvider.credential(email, password);
      var auth = firebase.auth();
      var currentUser = auth.currentUser;
      
	firebase.auth().signInWithEmailAndPassword(email, password)
		.catch(function(error) {
	  // Handle Errors here.
	  var errorCode = error.code;
	  var errorMessage = error.message;
	  if (errorCode === 'auth/wrong-password') {
		alert('Wrong password.');
	  } else {
		alert(errorMessage);
	  }
	  console.log(error);
	});
    });
	
//logout 
    
    document.querySelector('#sign-out').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      firebase.auth().signOut();
    });
	
	
	firebase.auth().onAuthStateChanged(function(user) {
	var user = firebase.auth().currentUser;

	if (user) {
		// User is signed in.
	} else {
		// No user is signed in.
	}
	
	});
  </script>
  

</body>

</html>