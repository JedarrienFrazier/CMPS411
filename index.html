<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SELU Music Department Management System</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/MUSA_panel-table.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="assets/css/MUSA_panel-table1.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="indexStyle.css">
</head>

<body>
    <script src="assets/js/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.4.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAbvrZbVhmE_4zJe4KlSrsdSDOr4i0560c",
        authDomain: "cmps-411-music-department-ms.firebaseapp.com",
        databaseURL: "https://cmps-411-music-department-ms.firebaseio.com",
        projectId: "cmps-411-music-department-ms",
        storageBucket: "cmps-411-music-department-ms.appspot.com",
        messagingSenderId: "122196121534"
      };
      firebase.initializeApp(config);
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

	
	<div class="container">
    <div class="row">
    
    <p></p>
    <h1>Music Department's Equipment Management System</h1>
    
        

            <div class="panel panel-default panel-table">
              <div class="panel-heading">
                <div class="row">
                  <div class="col col-md-6">
                    <h3 class="panel-title">Equipment Check In/Out</h3>
                  </div>
                  <div class="col col-xs-6 ">
					  <!-- Trigger the modal with a button -->
					  <button type="button" class="btn-lg" data-toggle="modal" data-target="#myModal">Add Row</button>

					  <!-- Modal -->
					  <div class="modal fade" id="myModal" role="dialog">
						<div class="modal-dialog modal-lg">
						  <div class="modal-content">
							<div class="modal-header">
							  
							  <h4 class="modal-title" align>Instrument Rentals</h4>
							</div>	  

						  <h3>Add a new instrument</h3>

						  <form id="InstrumentForm">
							<div class="form-group">
							  <label for="talkBRAND">Brand</label>
							  <input class="form-control" id="talkBRAND" placeholder="Brand of the instrument">
							</div>

							<div class="form-group">
							<label for="talkCONDITION">Condition</label>
							  <!-- <input class="form-control" id="talkCONDITION" placeholder="Type of instrument"> -->
                                <select id="talkCONDITION">
                                  <option value="" disabled selected>Select your option</option>
                                  <option value="New">New</option>
                                  <option value="Good">Good</option>
                                  <option value="Fine">Fine</option>
                                  <option value="Works">Works</option>
                                  <option value="Poor">Poor</option>
                                  <option value="Bad">Bad</option>
                                  <option value="???">???</option>
                                </select>
							</div>

							<div class="form-group">
							  <label for="talkHASMOUTHPIECE">Does the instrument have a mouthpiece?</label>
							  <label><input type="radio" name="mouthPiece"  id="HASMOUTHPIECE_True" value="true" >Yes</label>
                              <label><input type="radio" name="mouthPiece" id="HASMOUTHPIECE_False" value="false" >No</label>
							</div>
							
							<div class="form-group">
							  <label for="talkNOTES">Notes</label>
							  <input class="form-control" id="talkNOTES" placeholder="Notes on the instrument's current status">
							</div>
							
							<div class="form-group">
							  <label for="talkTYPE">Type</label>
							  <!-- <input class="form-control" id="talkTYPE" placeholder="Type of instrument"> -->
                                <select id="talkTYPE">
                                  <option value="" disabled selected>Select your option</option>
                                  <option value="Baritone">Baritone</option>
                                  <option value="Tuba">Tuba</option>
                                  <option value="Cornet">Cornet</option>
                                  <option value="Euphonium">Euphonium</option>
                                  <option value="Horn">Horn</option>
                                  <option value="Mellophone">Mellophone</option>
                                  <option value="Sousaphone">Sousaphone</option>
                                  <option value="Trombone">Trombone</option>
                                  <option value="Clarinet">Clarinet</option>
                                  <option value="Flute">Flute</option>
                                  <option value="Piccolo">Piccolo</option>
                                  <option value="Saxophone">Saxophone</option>
                                  <option value="Keyboard">Keyboard</option>
                                  <option value="Percussion">Percussion</option>
                                </select>
							</div>
							
							<!-- When you click this button, trigger the submit event on this form. -->
							<button TYPE="submit" class="btn btn-default">Submit</button>
							
						<script>

							// Reference to the Instruments object in your Firebase database
							var Instruments = firebase.database().ref("Instruments");

							// Save a new Instrument to the database, using the input in the form
							var submitInstrument = function () {

							  // Get input values from each of the form elements
							  var BRAND = $("#talkBRAND").val();
							  var CONDITION = $("#talkCONDITION").val();
                              var HASMOUTHPIECE
                              if(document.getElementById('HASMOUTHPIECE_True').checked) {
                                HASMOUTHPIECE = $("#HASMOUTHPIECE_True").val();
                              }else if(document.getElementById('HASMOUTHPIECE_False').checked) {
                                HASMOUTHPIECE = $("#HASMOUTHPIECE_False").val();
                              } 
							  var NOTES = $("#talkNOTES").val();
							  var TYPE = $("#talkTYPE").val();

							  // Push a new Instrument to the database using those values
							  Instruments.push({
								"BRAND": BRAND,
								"CONDITION": CONDITION,
								"HAS MOUTHPIECE": HASMOUTHPIECE,
								"NOTES": NOTES,
								"TYPE": TYPE
							  });
							};

							// Get the single most recent Instrument from the database and
							// update the table with its values. This is called every time the child_added
							// event is triggered on the Instruments Firebase reference, which means
							// that this will update EVEN IF you don't refresh the page. Magic.
							Instruments.limitToLast(1).on('child_added', function(childSnapshot) {
							  // Get the Instrument data from the most recent snapshot of data
							  // added to the Instruments list in Firebase
							  Instrument = childSnapshot.val();

							  // Update the HTML to display the Instrument text
							  $("#BRAND").html(Instrument.BRAND)
							  $("#CONDITION").html(Instrument.CONDITION)
							  $("#HASMOUTHPIECE").html(Instrument.HASMOUTHPIECE)
							  $("#NOTES").html(Instrument.NOTES)
							  $("#TYPE").html(Instrument.TYPE)

							  // Make the link actually work and direct to the URL provided
							  //$("#link").attr("href", Instrument.link)
							});

							// When the window is fully loaded, call this function.
							// Note: because we are attaching an event listener to a particular HTML element
							// in this function, we can't do that until the HTML element in question has
							// been loaded. Otherwise, we're attaching our listener to nothing, and no code
							// will run when the submit button is clicked.
							$(window).load(function () {

							  // Find the HTML element with the id InstrumentForm, and when the submit
							  // event is triggered on that element, call submitInstrument.
							  $("#InstrumentForm").submit(submitInstrument);

							});						
						
						</script>
							
							
						  </form>
							<div class="modal-footer">
							  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							</div>
						  </div>
						</div>
					  </div>
                  </div>
                </div>
              </div>
              <div class="panel-body">
                <table class="table table-striped table-bordered table-list">
                
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

    <div class="container">
        <div class="row clearfix">
            <div class="col-md-12 table-responsive">
                <table class="table table-bordered table-hover table-sortable" id="tab_logic">
                    <thead>
                        <tr >
                            <th class="text-center">
                                Instrument Type
                            </th>
                            <th class="text-center">
                                Instrument Brand
                            </th>
                            <th class="text-center">
                                Condition
                            </th>
                            <th class="text-center">
                                Has Mouthpiece
                            </th>
                            <th class="text-center">
                                Notes/Description
                            </th>
                            <th class="text-center">
                                 
                            </th>
                        </tr>
                    </thead>
                    <tbody id="table_body">
                    </tbody>
                </table>
            </div>
        </div>
    </div></div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="indexFB.js"></script>
</body>
</html>
